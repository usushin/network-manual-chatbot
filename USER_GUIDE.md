# 使い方ガイド（スクリーンショット付き）

## 📖 ステップバイステップ操作手順

### Step 1: 初期セットアップ

#### 1-1. アプリケーションの起動
```bash
cd ~/test_project/network_manual_chatbot
source venv/bin/activate
streamlit run app.py
```

**画面表示例:**
```
ブラウザが自動的に開き、以下のURLが表示されます
http://localhost:8501
```

#### 1-2. 初期画面の確認
**表示される画面:**
- 🌐 タイトル: "ネットワーク機器マニュアル チャットボット"
- サイドバー: 設定メニュー
- メイン画面: 警告メッセージ "⚠️ Groq APIキーを入力してください"

### Step 2: Groq APIキーの設定

#### 2-1. APIキーの取得
1. **ブラウザで https://console.groq.com/keys にアクセス**
2. **Googleアカウントでサインイン**
3. **「Create API Key」ボタンをクリック**
4. **生成されたキーをコピー** (gsk_で始まる文字列)

#### 2-2. APIキーの入力
**サイドバーの操作:**
```
┌─────────────────────────┐
│        設定             │
├─────────────────────────┤
│ Groq API Key            │
│ [●●●●●●●●●●●●●●●●●]     │  ← ここにAPIキーを入力
│ 無料で取得できます      │
├─────────────────────────┤
│     PDFアップロード     │
│ ファイルを選択...       │
└─────────────────────────┘
```

### Step 3: PDFマニュアルのアップロード

#### 3-1. ファイル選択
**サイドバーの「マニュアルのアップロード」セクション:**
```
┌─────────────────────────┐
│ マニュアルのアップロード │
├─────────────────────────┤
│ PDFファイルを選択        │
│ [ファイルを選択...]      │  ← クリック
│                         │
│ 選択されたファイル:      │
│ ✓ manual1.pdf (2.3MB)   │
│ ✓ manual2.pdf (1.8MB)   │
├─────────────────────────┤
│ [マニュアルを処理]       │  ← クリック
└─────────────────────────┘
```

#### 3-2. 処理の実行
**「マニュアルを処理」ボタンをクリック後:**
```
表示メッセージ:
┌─────────────────────────────────┐
│ 🔄 PDFを処理中...              │
│                                 │
│ Processing: manual1.pdf         │
│ Processing: manual2.pdf         │
│ Total chunks created: 3,427     │
│                                 │
│ ✅ マニュアルの処理が完了！     │
└─────────────────────────────────┘
```

### Step 4: チャットボットの使用

#### 4-1. チャット画面の表示
**処理完了後のメイン画面:**
```
┌─────────────────────────────────────────────────────────┐
│ 🌐 ネットワーク機器マニュアル チャットボット             │
│ CISCO等のネットワーク機器に関する技術的な質問にお答え... │
├─────────────────────────────────────────────────────────┤
│                                                         │
│ (チャット履歴エリア)                                    │
│                                                         │
│                                                         │
├─────────────────────────────────────────────────────────┤
│ 質問を入力してください... [送信]                        │  ← 入力欄
└─────────────────────────────────────────────────────────┘
```

#### 4-2. 質問の入力と回答
**入力例:** "VRRPの設定方法を教えてください"

**回答表示例:**
```
┌─────────────────────────────────────────────────────────┐
│ 👤 あなた                                               │
│ VRRPの設定方法を教えてください                          │
├─────────────────────────────────────────────────────────┤
│ 🤖 アシスタント                                         │
│                                                         │
│ VRRPの設定手順についてご説明します。                    │
│                                                         │
│ 1. VRRP機能の有効化                                     │
│    Router(config)# feature vrrp                        │
│                                                         │
│ 2. インターフェースでのVRRP設定                         │
│    Router(config-if)# vrrp 1 ip 192.168.1.1            │
│    Router(config-if)# vrrp 1 priority 110              │
│                                                         │
│ [参照元を表示 ▼]                                        │
│ ファイル: VRRP-A_High_Availability.pdf (ページ: 45)    │
│ 内容: VRRP configuration requires enabling the...      │
└─────────────────────────────────────────────────────────┘
```

### Step 5: 高度な機能の使用

#### 5-1. 会話履歴の活用
**連続した質問の例:**
```
質問1: "VRRPの設定方法を教えてください"
回答1: (VRRPの基本設定手順)

質問2: "先ほどの設定で冗長化の確認方法は？"
回答2: (前の文脈を理解した回答)
```

#### 5-2. 参照元の確認
**「参照元を表示」をクリックすると:**
```
┌─────────────────────────────────────┐
│ 📄 参照元                           │
├─────────────────────────────────────┤
│ ファイル: VRRP-A_High_Availability  │
│ ページ: 45                          │
│ 内容: VRRP configuration requires   │
│       enabling the feature first... │
├─────────────────────────────────────┤
│ ファイル: Command_Line_Interface    │
│ ページ: 128                         │
│ 内容: The vrrp command configures   │
│       Virtual Router Redundancy...  │
└─────────────────────────────────────┘
```

### Step 6: 2回目以降の利用

#### 6-1. 保存済みデータの読み込み
**サイドバーの「保存済みデータを読み込む」ボタン:**
```
┌─────────────────────────┐
│ [保存済みデータを読み込む] │  ← クリック
├─────────────────────────┤
│ ✅ データを読み込みました！│
└─────────────────────────┘
```

これにより、PDFの再処理なしに即座にチャットボットが利用可能になります。

### Step 7: 便利な機能

#### 7-1. 会話履歴のクリア
**サイドバー下部:**
```
┌─────────────────────────┐
│ [会話履歴をクリア]       │  ← クリック
└─────────────────────────┘
```

#### 7-2. 複数PDFの横断検索
**複数のマニュアルから自動的に関連情報を検索:**
```
質問: "ルーティングの設定方法"
回答: 複数のマニュアルから関連する設定手順を統合して回答
```

## 💡 効果的な使い方のコツ

### 質問のベストプラクティス

#### ✅ 良い質問例:
```
- "VRRPの基本的な設定手順を教えてください"
- "インターフェースの冗長化設定で注意点は？"
- "show vrrp コマンドの出力の見方を説明してください"
- "BGPのneighbor設定でよくあるエラーは？"
```

#### ❌ 避けるべき質問例:
```
- "これ"（具体的でない）
- "全部教えて"（範囲が広すぎ）
- "マニュアルにないことを推測して"（推測は避ける）
```

### 回答精度を向上させる方法

#### 1. 段階的な質問
```
Step 1: "VRRPとは何ですか？"
Step 2: "VRRPの設定手順を教えてください"
Step 3: "設定したVRRPの動作確認方法は？"
```

#### 2. 具体的な製品名の指定
```
例: "Cisco Catalyst 9000シリーズでのVLAN設定"
```

#### 3. エラーメッセージの引用
```
例: "'VRRP authentication mismatch' エラーの対処法"
```

## 📊 パフォーマンス指標

### 応答時間の目安
- **簡単な質問**: 3-5秒
- **複雑な質問**: 5-10秒
- **初回PDF処理**: 30秒-2分

### 回答品質の指標
- **技術的正確性**: マニュアルベースのため高い
- **日本語品質**: ビジネスレベル
- **参照元表示**: 常に表示される

## 🔧 カスタマイズオプション

### 検索精度の調整
設定可能な項目（上級者向け）:
```python
# src/document_processor.py
chunk_size=1000        # より大きく→文脈が豊富
chunk_overlap=200      # より大きく→連続性向上

# app.py での検索設定
search_kwargs={"k": 4} # より大きく→より多くの参照元
```

### モデルの変更
```python
# src/chatbot.py
model_name="llama3-8b-8192"     # より高速
model_name="llama3-70b-8192"    # より高品質（デフォルト）
model_name="mixtral-8x7b-32768" # 代替オプション
```

これで基本的な使い方から高度な活用方法まで、すべての操作手順が把握できます。何か不明な点があれば、TROUBLESHOOTING.mdを参照してください。